<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Cloud Analytics Dashboard</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<style>
body{background:#f5f7fb;font-family:system-ui}
.card{border:none;border-radius:16px}
.chart-box{height:320px}
.test-btn{
 position:absolute;
 right:14px;
 bottom:14px;
 transition:.2s;
}

.test-btn:hover{
 background:#22c55e;
 border-color:#22c55e;
 color:white;
}

</style>
</head>

<body>

<div class="container py-5">

<div class="text-center mb-4">
<h1 class="fw-bold">Cloud Analytics Dashboard</h1>
<p class="text-muted">Aslan Daiyrov (70086) — Cloud Technologies Project</p>
<small class="text-muted">Last updated: January 2026</small>
</div>

<div class="row g-4 mb-5">
<div class="col-md-3"><div class="card p-3 shadow-sm text-center"><small>Total Sales</small><h4>210</h4></div></div>
<div class="col-md-3"><div class="card p-3 shadow-sm text-center"><small>Total Users</small><h4>200</h4></div></div>
<div class="col-md-3"><div class="card p-3 shadow-sm text-center"><small>Traffic Sources</small><h4>5</h4></div></div>
<div class="col-md-3"><div class="card p-3 shadow-sm text-center"><small>Product Categories</small><h4>5</h4></div></div>
</div>

<div class="row g-4">

<!-- Monthly Sales -->
<div class="col-md-6">
<div class="card p-3 shadow-sm position-relative">

<div class="d-flex justify-content-between mb-2">
<b>Monthly Sales</b>
<button class="btn btn-sm btn-outline-secondary"
 onclick="resetChart('salesChart')">↺ Reset</button>
</div>

<div id="salesChart" class="chart-box"></div>

<button class="btn btn-sm btn-outline-secondary test-btn"
 onclick="openTest('Monthly Sales','/api/sales_monthly')">
Test
</button>

</div>
</div>


<!-- User Growth -->
<div class="col-md-6">
<div class="card p-3 shadow-sm position-relative">

<div class="d-flex justify-content-between mb-2">
<b>User Growth</b>
<button class="btn btn-sm btn-outline-secondary"
 onclick="resetChart('usersChart')">↺ Reset</button>
</div>

<div id="usersChart" class="chart-box"></div>

<button class="btn btn-sm btn-outline-secondary test-btn"
 onclick="openTest('User Growth','/api/user_growth')">
Test
</button>

</div>
</div>


<!-- Traffic -->
<div class="col-md-6">
<div class="card p-3 shadow-sm position-relative">

<div class="d-flex justify-content-between mb-2">
<b>Traffic Sources</b>
<button class="btn btn-sm btn-outline-secondary"
 onclick="resetChart('trafficChart')">↺ Reset</button>
</div>

<div id="trafficChart" class="chart-box"></div>

<button class="btn btn-sm btn-outline-secondary test-btn"
 onclick="openTest('Traffic Sources','/api/traffic_sources')">
Test
</button>

</div>
</div>


<!-- Products -->
<div class="col-md-6">
<div class="card p-3 shadow-sm position-relative">

<div class="d-flex justify-content-between mb-2">
<b>Product Categories</b>
<button class="btn btn-sm btn-outline-secondary"
 onclick="resetChart('productsChart')">↺ Reset</button>
</div>

<div id="productsChart" class="chart-box"></div>

<button class="btn btn-sm btn-outline-secondary test-btn"
 onclick="openTest('Product Categories','/api/product_categories')">
Test
</button>

</div>
</div>

<!-- API TEST MODAL -->
<div class="modal fade" id="testModal" tabindex="-1">
<div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
<div class="modal-content">

<div class="modal-header">
<h5 id="testTitle">API Test</h5>
<button class="btn-close" data-bs-dismiss="modal"></button>
</div>

<div class="modal-body">

<div class="card p-3 mb-3">
<strong>API Endpoint</strong>
<input id="apiInput" class="form-control mt-2">
</div>

<button class="btn btn-success mb-3" onclick="runApiTest()">▶ Run Test</button>

<pre id="testResult" class="bg-dark text-light p-3 rounded" style="display:none"></pre>

</div>
</div>
</div>
</div>


<footer class="text-center text-muted small mt-5">
Cloud Technologies Project — Aslan Daiyrov (70086) - 2026 - All rights reserved.
</footer>

<script src="/static/script.js?v=2"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
